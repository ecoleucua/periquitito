<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Subir Imagen a ImgBB</title>
</head>
<body>

    <h1>Sube tu imagen</h1>
    <input type="file" id="imagenInput">
    <button onclick="subirImagen()">Subir Imagen</button>

    <hr>
    <h2>Resultado:</h2>
    <div id="resultado"></div>

    <script>
        async function subirImagen() {
            // REEMPLAZA ESTO CON TU NUEVA API KEY
            const apiKey = 'b4bb4f3b0f0a6aaa0fb4e86d12a43c67';
            const input = document.getElementById('imagenInput');
            const resultadoDiv = document.getElementById('resultado');

            if (input.files.length === 0) {
                alert('Por favor, selecciona una imagen primero.');
                return;
            }

            // 1. Creamos un FormData para enviar la imagen
            const formData = new FormData();
            formData.append('image', input.files[0]);

            resultadoDiv.innerHTML = 'Subiendo...';

            try {
                // 2. Hacemos la petición POST a la API de ImgBB
                const response = await fetch(`https://api.imgbb.com/1/upload?key=${apiKey}`, {
                    method: 'POST',
                    body: formData
                });

                // 3. Obtenemos la respuesta en formato JSON
                const data = await response.json();

                if (data.success) {
                    const url = data.data.display_url;
                    console.log('URL de la imagen:', url);

                    // 4. Mostramos la imagen y su enlace
                    resultadoDiv.innerHTML = `
                        <p>¡Imagen subida con éxito!</p>
                        <a href="${url}" target="_blank">${url}</a>
                        <br><br>
                        <img src="${url}" alt="Imagen subida" width="300">
                    `;
                } else {
                    throw new Error(data.error.message);
                }

            } catch (error) {
                console.error('Error al subir la imagen:', error);
                resultadoDiv.innerHTML = `Error: ${error.message}`;
            }
        }
    </script>

</body>
</html>